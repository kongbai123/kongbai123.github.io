<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content="1EB8XoOl0C"><meta name="google-site-verification" content="K7thEgdLm0UfRWJ5MGdF7sCcjClSzAlxFLPv2Oz5CGM"><title> Linux03:大数据相关配置 · 周晓钢的知识崖</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="Linux03:大数据相关配置 - xiaogang zhou"><meta name="keywords" content="知识崖"><meta name="author" content="xiaogang zhou"><link rel="short icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/bubuzou.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="周晓钢的知识崖"></head><body><header><div class="header row"> <a href="/" class="logo-link"><img src="/images/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" data-hover="首页" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" data-hover="归档" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/about/" target="_self" data-hover="关于" class="nav-list-link">关于</a></li></ul><div class="search"><a id="search_btn" href="#search"></a></div></div></header><div class="row scroll-con"><section class="container"><!-- for archive page--><div id="postAr" class="post"><article class="post-block"><h1 class="post-title">Linux03:大数据相关配置</h1><div class="post-info">2018-11-26<p class="visit"><i data-hk-page="current">-</i><span>次访问</span></p></div><div class="post-content"><hr>
<h2 id="大数据配置"><a href="#大数据配置" class="headerlink" title="大数据配置"></a>大数据配置</h2><h3 id="1-java环境变量"><a href="#1-java环境变量" class="headerlink" title="1. java环境变量"></a>1. java环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line">添加如下内容：JAVA_HOME根据实际目录来</span><br><span class="line">export JAVA_HOME=/usr/local/src/jdk1.6.0_45</span><br><span class="line">export CLASSPATH=$CLASSPATH:$JAVA_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line">//生效指令</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<h3 id="2-hadoop-配置文件修改"><a href="#2-hadoop-配置文件修改" class="headerlink" title="2. hadoop 配置文件修改"></a>2. hadoop 配置文件修改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">masters</span><br><span class="line">slaves</span><br><span class="line">core-site.xml</span><br><span class="line">mapred-site.xml</span><br><span class="line">hdfs-site.xml</span><br><span class="line">hadoop-env.sh</span><br></pre></td></tr></table></figure>
<h3 id="3-本地网络配置"><a href="#3-本地网络配置" class="headerlink" title="3. 本地网络配置"></a>3. 本地网络配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">192.168.183.10 master</span><br><span class="line">192.168.183.11 slave1</span><br><span class="line">192.168.183.12 slave2</span><br></pre></td></tr></table></figure>
<h3 id="4-当前host配置"><a href="#4-当前host配置" class="headerlink" title="4. 当前host配置"></a>4. 当前host配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sysconfig]# /etc/hosts</span><br><span class="line">[root@localhost sysconfig]# ls /etc/sysconfig/network</span><br><span class="line">[root@localhost sysconfig]# /etc/sysconfig/network</span><br><span class="line"></span><br><span class="line">hostname master //重启后失效必须配置/etc/sysconfig/network</span><br></pre></td></tr></table></figure>
<h3 id="5-关闭防火墙"><a href="#5-关闭防火墙" class="headerlink" title="5. 关闭防火墙"></a>5. 关闭防火墙</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost src]# /etc/init.d/iptables stop</span><br><span class="line"></span><br><span class="line">[root@localhost conf]# setenforce 0</span><br><span class="line">[root@localhost conf]# getenforce</span><br><span class="line">Permissive</span><br><span class="line"></span><br><span class="line">推荐</span><br><span class="line">#查看防火墙状态</span><br><span class="line">service iptables status</span><br><span class="line">#关闭防火墙</span><br><span class="line">service iptables stop</span><br><span class="line">#查看防火墙开机启动状态</span><br><span class="line">chkconfig iptables --list</span><br><span class="line">#关闭防火墙开机启动</span><br><span class="line">chkconfig iptables off</span><br></pre></td></tr></table></figure>
<h3 id="6-ssh-密钥验证"><a href="#6-ssh-密钥验证" class="headerlink" title="6. ssh 密钥验证"></a>6. ssh 密钥验证</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//生成公私密钥</span><br><span class="line">[root@localhost conf]# ssh-keygen</span><br><span class="line">//进入隐藏目录</span><br><span class="line">[root@localhost conf]# cd ~/.ssh/</span><br><span class="line"></span><br><span class="line">-rw-r--r--. 1 root root 1181 Jun 12 08:54 authorized_keys</span><br><span class="line">-rw-------. 1 root root 1675 Jun 12 08:45 id_rsa</span><br><span class="line">-rw-r--r--. 1 root root  393 Jun 12 08:45 id_rsa.pub</span><br><span class="line"></span><br><span class="line">//authorized_keys保存3个公钥，然后无密码访问</span><br><span class="line">[root@localhost .ssh]# ssh slave1</span><br></pre></td></tr></table></figure>
<h3 id="7-启动hadoop-集群"><a href="#7-启动hadoop-集群" class="headerlink" title="7. 启动hadoop 集群"></a>7. 启动hadoop 集群</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//格式化</span><br><span class="line">[root@localhost bin]# ./hadoop namenode -format</span><br><span class="line">//启动集群</span><br><span class="line">[root@localhost bin]# ./start-all.sh </span><br><span class="line">//查询启动状态</span><br><span class="line">[root@localhost bin]# jps</span><br><span class="line">13340 SecondaryNameNode</span><br><span class="line">13518 Jps</span><br><span class="line">13191 NameNode</span><br><span class="line">13410 JobTracker</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="net配置设置"><a href="#net配置设置" class="headerlink" title="net配置设置"></a>net配置设置</h2><h3 id="1-network-网络地址目录"><a href="#1-network-网络地址目录" class="headerlink" title="1. network 网络地址目录"></a>1. network 网络地址目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line"> </span><br><span class="line">例如配置如下： </span><br><span class="line">DEVICE=&quot;eth0&quot;</span><br><span class="line">BOOTPROTO=&quot;static&quot;</span><br><span class="line">NM_CONTROLLED=&quot;yes&quot;</span><br><span class="line">ONBOOT=&quot;yes&quot;</span><br><span class="line">TYPE=&quot;Ethernet&quot;</span><br><span class="line">IPADDR=192.168.183.10</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.183.2</span><br><span class="line">DNS1=10.8.11.27(本地DNS)</span><br></pre></td></tr></table></figure>
<h3 id="2-共享文件夹目录地址"><a href="#2-共享文件夹目录地址" class="headerlink" title="2.  共享文件夹目录地址"></a>2.  共享文件夹目录地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /mnt/hgfs/</span><br></pre></td></tr></table></figure>
<h3 id="3-远程复制"><a href="#3-远程复制" class="headerlink" title="3. 远程复制"></a>3. 远程复制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -rp aaa.txt 192.168.183.11:/usr/local/src/</span><br></pre></td></tr></table></figure>
<h3 id="4-本机hosts目录地址"><a href="#4-本机hosts目录地址" class="headerlink" title="4. 本机hosts目录地址"></a>4. 本机hosts目录地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">vim /ect/hosts</span><br><span class="line"></span><br><span class="line">    127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">    ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line">    192.168.183.10 master </span><br><span class="line">    192.168.183.11 slave1</span><br><span class="line">    192.168.183.12 slave2</span><br><span class="line"></span><br><span class="line">//临时生效</span><br><span class="line">hostname master</span><br><span class="line">//永久生效</span><br><span class="line">vim /etc/sysconfig/network</span><br><span class="line">    NETWORKING=yes</span><br><span class="line">    HOSTNAME=master</span><br></pre></td></tr></table></figure>
<h3 id="5-集群时间同步"><a href="#5-集群时间同步" class="headerlink" title="5. 集群时间同步"></a>5. 集群时间同步</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#查看时间同步状态</span><br><span class="line">[root@master bin]# service ntpd status</span><br><span class="line">ntpd is stopped</span><br><span class="line">#启动</span><br><span class="line">[root@master bin]# sudo service ntpd start</span><br><span class="line">Starting ntpd:  [  OK  ]</span><br><span class="line">#开机默认启动</span><br><span class="line">[root@master bin]# chkconfig ntpd on</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Zookeeper配置安装"><a href="#Zookeeper配置安装" class="headerlink" title="Zookeeper配置安装"></a>Zookeeper配置安装</h2><h3 id="1-进入zookeeper安装目录"><a href="#1-进入zookeeper安装目录" class="headerlink" title="1. 进入zookeeper安装目录"></a>1. 进入zookeeper安装目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@master zookeeper-3.4.5]# touch myid</span><br><span class="line">[root@master zookeeper-3.4.5]# vim myid //添加编号：0</span><br><span class="line">[root@master zookeeper-3.4.5]# cd conf/</span><br><span class="line">[root@master conf]# ls</span><br><span class="line">configuration.xsl  log4j.properties  zoo_sample.cfg</span><br><span class="line">#创建配置文件</span><br><span class="line">[root@master conf]# cat zoo_sample.cfg &gt; zoo.cfg</span><br><span class="line">#分发到各个节点</span><br><span class="line">[root@master src]# scp -rp zookeeper-3.4.5 slave2:/usr/local/src/</span><br><span class="line">#进入bin目录</span><br><span class="line">[root@master zookeeper-3.4.5]# cd bin/</span><br><span class="line">[root@slave1 bin]# ./zkServer.sh start</span><br><span class="line">JMX enabled by default</span><br><span class="line">Using config: /usr/local/src/zookeeper-3.4.5/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br><span class="line"></span><br><span class="line">#查看状态</span><br><span class="line">[root@master bin]# jps</span><br><span class="line">50774 QuorumPeerMain  【zookeeper 进程】</span><br><span class="line">50906 Jps</span><br><span class="line">[root@master bin]# ./zkServer.sh status</span><br><span class="line">JMX enabled by default</span><br><span class="line">Using config: /usr/local/src/zookeeper-3.4.5/bin/../conf/zoo.cfg</span><br><span class="line">Mode: follower</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Storm-配置安装"><a href="#Storm-配置安装" class="headerlink" title="Storm 配置安装"></a>Storm 配置安装</h2><h3 id="1-进入storm安装目录"><a href="#1-进入storm安装目录" class="headerlink" title="1. 进入storm安装目录"></a>1. 进入storm安装目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@master src]# cd apache-storm-0.9.3</span><br><span class="line">[root@master apache-storm-0.9.3]# cd conf</span><br><span class="line">[root@master conf]# ls</span><br><span class="line">[root@master conf]# vim storm.yaml </span><br><span class="line">storm_env.ini  storm.yaml</span><br><span class="line">#修改配置</span><br><span class="line"> storm.zookeeper.servers:</span><br><span class="line">     - &quot;master&quot;</span><br><span class="line">     - &quot;server1&quot;</span><br><span class="line">     - &quot;server2&quot;</span><br><span class="line"></span><br><span class="line"> nimbus.host: &quot;master&quot;</span><br><span class="line"> supervisor.slots.ports:</span><br><span class="line">    - 6700</span><br><span class="line">    - 6701</span><br><span class="line">    - 6702</span><br><span class="line">    - 6703</span><br><span class="line">    - 6704</span><br><span class="line"></span><br><span class="line">#分发</span><br><span class="line">[root@master src]# scp -rp  apache-storm-0.9.3 slave2:/usr/local/src/</span><br></pre></td></tr></table></figure>
</div></article></div><div class="right-container"><div class="widget"><div class="category"><h4>分类归档</h4><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDEA/">IDEA</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Maven/">Maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Readme/">Readme</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/soft/">soft</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/springboot/">springboot</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/springcloud/">springcloud</a><span class="category-list-count">1</span></li></ul></div></div><!--include ../widget/tagcloud--><div class="widget"><div class="recent"><h4>最近文章</h4><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/Python/1579743010000.html">Python-003:函数式编程</a></li><li class="post-list-item"><a class="post-list-link" href="/Python/1579683101000.html">Python-002:高级特性</a></li><li class="post-list-item"><a class="post-list-link" href="/Python/1579586436000.html">Python-001:基础学习</a></li><li class="post-list-item"><a class="post-list-link" href="/IDEA/1555034436.html">IDEA-001:常用插件</a></li><li class="post-list-item"><a class="post-list-link" href="/Docker/1544509536.html">Docker01:常用命令</a></li></ul></div></div><!--include ../widget/catalog--></div></section></div><div class="right-menu"></div><div class="modal search-modal"><div class="input-field"><input type="text" id="search_input"><label for="search-input">搜索</label></div><div id="search_result" class="search-result"></div></div><div class="blog-overlay"></div><footer class="row"><div class="footer-con"><div class="paginator"><a href="/Maven/1544433051.html" class="prev">上一篇</a><a href="/springcloud/1542267722.html" class="next">下一篇</a></div><div class="copyright"><p>© 2016 - 2020 <a target="_blank">xiaogang zhou</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> <br> and <a href="https://github.com/Bulandent/hexo-theme-bubuzou" target="_blank">hexo-theme-bubuzou</a></p></div><div class="totop"><i></i></div></div></footer><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="http://apps.bdimg.com/libs/jquery/1.8.2/jquery.min.js"></script><script src="https://cdn1.lncld.net/static/js/av-mini-0.6.10.js"></script><script src="/scripts/hit-kounter-lc-0.2.0.js"></script><script src="/scripts/arAnchor.js"></script><script src="/scripts/main.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>